@charset 'utf-8';

@import 'bourbon';
@import 'grid-settings';
@import 'neat';
@import 'base/base';
@import 'grid-settings';


////////////////////////////////////////////////////////////////////////////////
// #  Variables
//
// Much of the typographic sizing for the body is setup here to accompany body
// text set at 16px.

$leading-body:            1.8;
$leading-heading:         1.4;
$type-size-body:          16;

// ## Spacing based on the leading (the line-height).
//
// This spacing unit is relative to the element’s font-size/$leading-body. We
// setup the leading (base line-hight) as our spacing unit (in ems).
//
$line-single:             ($leading-body * 1em); // 1.6em
$line-double:             ($line-single * 2);
$line-three-quarter:      ($line-single * 0.75);
$line-half:               ($line-single / 2);
$line-quarter:            ($line-single / 4);

// ## Colours
//
$white:                   #fff;
$black:                   #000;

$off-white:               #f0f3f5;
$off-black:               #101010;


$grey:                    #6e6e6e;
$light-grey:              lighten($grey, 30%);
$dark-grey:               lighten($grey, 20%);


$action-colour: #477DCA !default;


// ## Type families
//
$base-monospace: 'Lucida Sans Typewriter', 'Lucida Console', Monaco, 'Bitstream Vera Sans Mono', monospace;

$base-font-family: $base-monospace;

////////////////////////////////////////////////////////////////////////////////
// #  Mixins & functions

// ## Pixel to rem function
//
// Input: unitless numbers (the intended pixel value output).
//
// Assumes that the the body or html has a font-size of 16px.
//
// Effectively re-implements Bourbon’s pixel to rem calc function from <5.0.0.
//
@function rem($pxval) {
  $base-size: $type-size-body;

  @return ($pxval / $base-size) * 1rem;
}

@mixin wrapper-padding {
  padding-left: $gutter;
  padding-right: $gutter;

  width: 100%;
  box-sizing: border-box;

  @include media($desktop) {
    padding-left: $gutter * 1.5;
    padding-right: $gutter * 1.5;
    width: 100%;
    // min-width: ...;
  }
}

@mixin wrapper {
  @include wrapper-padding;
  @include outer-container;
}


////////////////////////////////////////////////////////////////////////////////
// #  Base styles

* {
  box-sizing: border-box;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  line-height: $leading-heading;
  // font-family: $base-font-family;
}

body {
  margin: 0;
  font-size: rem(16);
  line-height: $leading-body;
  color: $off-black;
  background-color: $off-white;

  // font-family: $base-font-family;

  @include media($tablet) {
    font-size: rem(17);
  }

  main,
  footer[role='contentinfo'] {
    margin-bottom: $line-double;
  }

  header[role='banner'] {
    color: $white;
    background-color: $off-black;
    background-image: url('/assets/images/background.jpg');
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center center;
    border-bottom: 3px solid $off-black;

    .page-title {
      $page-title-background: desaturate(darken($action-colour, 27%), 15%);

      @include wrapper-padding;

      padding-top: $line-double;
      padding-bottom: $line-single;
      background: transparentize($page-title-background, 0.2);
      text-align: center;
      text-shadow: 1px 1px 3px desaturate(darken($action-colour, 40%), 15%); // clean me up :)

      h1 {
        font-size: rem(32);
        margin-bottom: 1em;

        @include media($tablet) {
          font-size: rem(48);
          text-align: left;
          margin-bottom: 0.5em;
        }
      }

      p {
        font-size: rem(26);

        @include media($tablet) {
          font-size: rem(28);
          text-align: left;
        }
        max-width: 40em; // doc
      }
    }

    nav {
      $nav-background: desaturate(darken($action-colour, 48%), 30%);
      $nav-colour: $white;
      $nav-link-colour: transparentize($nav-colour, 0.3);
      $footer-disclaimer-color: transparentize($nav-colour, 0.6);

      width: 100%;
      padding: $line-single;
      background: transparentize($nav-background, 0.15);
      text-shadow: 1px 1px 3px $nav-background;

      @include media($tablet) {
        display: flex;
        align-items: baseline;
      }

      .header--logo {
        margin-right: 0;

        @include media($tablet) {
          margin-right: $line-single;
        }

        @include media($desktop) {
          align-self: center;
        }

        img {
          display: block;
          height: $line-single;
          margin-bottom: $line-half;
          margin-left: auto;
          margin-right: auto;

          @include media($tablet) {
            margin-bottom: 0;
            margin-left: 0;
            margin-right: 0;
            text-align: left;
          }
        }
      }

      ul {
        margin: 0 0 $line-half 0;
        padding: 0;
        flex-grow: 2;

        @include media($tablet) {
          margin-bottom: 0;
        }

        li {
          list-style: none;
          font-size: rem(19);
          margin-bottom: 0.25em;
          text-align: center;

          @include media($tablet) {
            padding-right: $line-single;
            text-align: left;

            &:last-child {
              padding-right: 0;
            }
          }

          @include media($desktop) {
            display: inline;
            text-align: left;
          }

          a {
            color: $nav-link-colour;
            text-decoration: none;

            &:focus,
            &:hover {
              color: transparentize($nav-colour, 0);
            }
          }
        }
      }

      .nav--secondary {
        @include media($desktop) {
          flex-grow: 1;
          margin-right: rem(160);
        }

        li {
          font-size: rem(16);
        }
      }
    }
  }

  main {
    @include wrapper-padding;

    border-top: 3px solid #c1c1c1; // clean me up

    h2 {
      @include clearfix; // not working?

      margin-top: $line-single;

      @include media($tablet) {
        &:first-of-type {
          margin-top: $leading-body * 1.5em;
        }
      }
    }

    @include media($tablet) {
      *:not(h2) {
        margin-left: rem(288);
      }

      h2 {
        width: rem(256);
        text-align: right;

        & + * {
          margin-top: -(rem(42));
        }
      }

      p,
      li,
      dd {
        // we’re gonna keep our line-lengths/measures in check
        max-width: 40em;
      }
    }
  }

  footer[role='contentinfo'] {
    @include wrapper-padding;

    text-align: right;
  }
}
